/*! raphael4gwt 2013-08-26 */
!function(){function a(a,b){for(var c=a.length/b,d=0,e=c,f=0,g=[];d<a.length;)e--,0>e?(f+=a[d]*(1+e),g.push(f/c),f=a[d++]*-e,e+=c):f+=1*a[d++];return g}function b(a,b,c,d,e,f){var g=(c-a)/2,h=(e-c)/2,i=Math.atan((c-a)/Math.abs(d-b)),j=Math.atan((e-c)/Math.abs(d-f));i=d>b?Math.PI-i:i,j=d>f?Math.PI-j:j;var k=Math.PI/2-(i+j)%(2*Math.PI)/2,l=g*Math.sin(k+i),m=g*Math.cos(k+i),n=h*Math.sin(k+j),o=h*Math.cos(k+j);return{x1:c-l,y1:d+m,x2:c+n,y2:d+o}}function c(c,d,e,f,g,h,i,j){function k(a){for(var b=[],j=0,k=h.length;k>j;j++)b=b.concat(h[j]);b.sort(function(a,b){return a-b});var l=[],m=[];for(j=0,k=b.length;k>j;j++)b[j]!=b[j-1]&&l.push(b[j])&&m.push(d+n+(b[j]-B)*G);b=l,k=b.length;var o=a||c.set();for(j=0;k>j;j++){var p,q=m[j]-(m[j]-(m[j-1]||d))/2,s=((m[j+1]||d+f)-m[j])/2+(m[j]-(m[j-1]||d))/2;a?p={}:o.push(p=c.rect(q-1,e,Math.max(s+1,1),g).attr({stroke:"none",fill:"#000",opacity:0})),p.values=[],p.symbols=c.set(),p.y=[],p.x=m[j],p.axis=b[j];for(var u=0,v=i.length;v>u;u++){l=h[u]||h[0];for(var w=0,x=l.length;x>w;w++)l[w]==b[j]&&(p.values.push(i[u][w]),p.y.push(e+g-n-(i[u][w]-E)*H),p.symbols.push(t.symbols[u][w]))}a&&a.call(p)}!a&&(r=o)}function l(a){for(var b,f=a||c.set(),j=0,k=i.length;k>j;j++)for(var l=0,m=i[j].length;m>l;l++){var o=d+n+((h[j]||h[0])[l]-B)*G,p=d+n+((h[j]||h[0])[l?l-1:1]-B)*G,q=e+g-n-(i[j][l]-E)*H;a?b={}:f.push(b=c.circle(o,q,Math.abs(p-o)/2).attr({stroke:"#000",fill:"#000",opacity:1})),b.x=o,b.y=q,b.value=i[j][l],b.line=t.lines[j],b.shade=t.shades[j],b.symbol=t.symbols[j][l],b.symbols=t.symbols[j],b.axis=(h[j]||h[0])[l],a&&a.call(b)}!a&&(s=f)}var m=this;j=j||{},c.raphael.is(h[0],"array")||(h=[h]),c.raphael.is(i[0],"array")||(i=[i]);for(var n=j.gutter||10,o=Math.max(h[0].length,i[0].length),p=j.symbol||"",q=j.colors||m.colors,r=null,s=null,t=c.set(),u=[],v=0,w=i.length;w>v;v++)o=Math.max(o,i[v].length);var x=c.set();for(v=0,w=i.length;w>v;v++)j.shade&&x.push(c.path().attr({stroke:"none",fill:q[v],opacity:j.nostroke?1:.3})),i[v].length>f-2*n&&(i[v]=a(i[v],f-2*n),o=f-2*n),h[v]&&h[v].length>f-2*n&&(h[v]=a(h[v],f-2*n));var y=Array.prototype.concat.apply([],h),z=Array.prototype.concat.apply([],i),A=m.snapEnds(Math.min.apply(Math,y),Math.max.apply(Math,y),h[0].length-1),B=A.from,C=A.to,D=m.snapEnds(Math.min.apply(Math,z),Math.max.apply(Math,z),i[0].length-1),E=D.from,F=D.to,G=(f-2*n)/(C-B||1),H=(g-2*n)/(F-E||1),I=c.set();if(j.axis){var J=(j.axis+"").split(/[,\s]+/);+J[0]&&I.push(m.axis(d+n,e+n,f-2*n,B,C,j.axisxstep||Math.floor((f-2*n)/20),2,c)),+J[1]&&I.push(m.axis(d+f-n,e+g-n,g-2*n,E,F,j.axisystep||Math.floor((g-2*n)/20),3,c)),+J[2]&&I.push(m.axis(d+n,e+g-n,f-2*n,B,C,j.axisxstep||Math.floor((f-2*n)/20),0,c)),+J[3]&&I.push(m.axis(d+n,e+g-n,g-2*n,E,F,j.axisystep||Math.floor((g-2*n)/20),1,c))}var K,L=c.set(),M=c.set();for(v=0,w=i.length;w>v;v++){j.nostroke||L.push(K=c.path().attr({stroke:q[v],"stroke-width":j.width||2,"stroke-linejoin":"round","stroke-linecap":"round","stroke-dasharray":j.dash||""}));var N=Raphael.is(p,"array")?p[v]:p,O=c.set();u=[];for(var P=0,Q=i[v].length;Q>P;P++){var R=d+n+((h[v]||h[0])[P]-B)*G,S=e+g-n-(i[v][P]-E)*H;if((Raphael.is(N,"array")?N[P]:N)&&O.push(c[Raphael.is(N,"array")?N[P]:N](R,S,3*(j.width||2)).attr({fill:q[v],stroke:"none"})),j.smooth){if(P&&P!=Q-1){var T=d+n+((h[v]||h[0])[P-1]-B)*G,U=e+g-n-(i[v][P-1]-E)*H,V=d+n+((h[v]||h[0])[P+1]-B)*G,W=e+g-n-(i[v][P+1]-E)*H,X=b(T,U,R,S,V,W);u=u.concat([X.x1,X.y1,R,S,X.x2,X.y2])}P||(u=["M",R,S,"C",R,S])}else u=u.concat([P?"L":"M",R,S])}j.smooth&&(u=u.concat([R,S,R,S])),M.push(O),j.shade&&x[v].attr({path:u.concat(["L",R,e+g-n,"L",d+n+((h[v]||h[0])[0]-B)*G,e+g-n,"z"]).join(",")}),!j.nostroke&&K.attr({path:u.join(",")})}return t.push(L,x,M,I,r,s),t.lines=L,t.shades=x,t.symbols=M,t.axis=I,t.hoverColumn=function(a,b){return!r&&k(),r.mouseover(a).mouseout(b),this},t.clickColumn=function(a){return!r&&k(),r.click(a),this},t.hrefColumn=function(a){var b=c.raphael.is(arguments[0],"array")?arguments[0]:arguments;if(!(arguments.length-1)&&"object"==typeof a)for(var d in a)for(var e=0,f=r.length;f>e;e++)r[e].axis==d&&r[e].attr("href",a[d]);for(!r&&k(),e=0,f=b.length;f>e;e++)r[e]&&r[e].attr("href",b[e]);return this},t.hover=function(a,b){return!s&&l(),s.mouseover(a).mouseout(b),this},t.click=function(a){return!s&&l(),s.click(a),this},t.each=function(a){return l(a),this},t.eachColumn=function(a){return k(a),this},t}var d=function(){};d.prototype=Raphael.g,c.prototype=new d,Raphael.fn.linechart=function(a,b,d,e,f,g,h){return new c(this,a,b,d,e,f,g,h)}}();