/*! raphael4gwt 2013-08-26 */
function GanttChart(a){this.elementId=a,this.height=500,this.width=500,this.gridSize=25,this.labelAreaSize=250,this.currentRow=1,this.phaseColor="#AAA",this.taskColors=["#C24704","#D9CC3C","#FFEB79","#A0E0A9","#00ADA7"],this.cellpadding=4;var b=0;this.loadData=function(a){this.project=a},this.draw=function(){var a=this.getDates();width=this.labelAreaSize+a.length*this.gridSize;var c=this.getRows();height=c*this.gridSize,this.paper=Raphael(this.elementId,width,height),this.grid(),this.headers(a);var d=this.project[0].phases;for(p in d){var e=this.paper.text(5,this.currentRow*this.gridSize+this.gridSize/2,d[p].name);e.attr({"font-size":14,stroke:"none",fill:"black","text-anchor":"start"}),this.phaseLine(d[p]),this.currentRow++;var f=d[p].tasks;for(t in f)this.bar(f[t]),this.currentRow++;b<this.taskColors.length?b++:b=0}},this.getRows=function(){var a=this.project[0].phases,b=1;for(p in a){b++;var c=a[p].tasks;for(t in c)b++}return b},this.grid=function(){for(var a=this.gridSize;height>a;a+=this.gridSize){var b="M0,"+a+"L"+width+","+a,c=this.paper.path(b);c.attr({stroke:"#000"})}for(var d=this.labelAreaSize;width>d;d+=this.gridSize)var b="M"+d+",0L"+d+","+height,c=this.paper.path(b)},this.headers=function(a){var b=0;for(d in a){var c=this.paper.text(this.labelAreaSize+b*this.gridSize+.5*this.gridSize,.5*this.gridSize,a[d].format("M-D"));c.attr({"text-anchor":"middle"}),b++}},this.phaseLine=function(a){var b=this.getDates(),c=moment(a.startDate),d=moment(a.endDate);d.add("days",1);var e=moment.duration(c-b[0]),f=e.asDays()*this.gridSize+this.labelAreaSize+this.cellpadding,g=this.currentRow*this.gridSize+.25*this.gridSize,h=moment.duration(d-c),i=h.asDays()*this.gridSize-2*this.cellpadding,j=this.gridSize/4,k=this.paper.rect(f,g,i,j);k.attr({stroke:this.phaseColor}),k.attr({fill:this.phaseColor});var l=f+","+g,m=f+","+(g+.75*this.gridSize-this.cellpadding),n=f+.5*this.gridSize+","+g,o=this.paper.path("M"+l+"L"+m+"L"+n+"Z");o.attr({stroke:this.phaseColor,fill:this.phaseColor});var l=f+i+","+g,m=f+i+","+(g+.75*this.gridSize-this.cellpadding),n=f+i-.5*this.gridSize+","+g,p=this.paper.path("M"+l+"L"+m+"L"+n+"Z");p.attr({stroke:this.phaseColor,fill:this.phaseColor})},this.bar=function(a){var c=this.getDates(),d=moment(a.startDate),e=moment(a.endDate);e.add("days",1);var f=moment.duration(d-c[0]),g=f.asDays()*this.gridSize+this.labelAreaSize,h=this.currentRow*this.gridSize,i=moment.duration(e-d),j=i.asDays()*this.gridSize,k=this.gridSize,l=this.paper.rect(g+this.cellpadding,h+this.cellpadding,j-2*this.cellpadding,k-2*this.cellpadding),m=this.paper.text(10,h+k/2,a.name);m.attr({"font-size":14,stroke:"none",fill:"black","text-anchor":"start"});var n=this.taskColors[b],o=Raphael.color(n);l.attr({fill:o});var p,q=this.cellpadding;l.hover(function(){p=l.glow({width:q,opacity:.75,color:o})},function(){p.remove()})},this.getDates=function(){for(var a=moment(this.project[0].startDate),b=moment(this.project[0].endDate),c=[];b>=a;)c.push(a.clone()),a.add("days",1);return c}}var global=window;void 0==global.module&&(global.module=function(a,b){var c=global[a];void 0==c&&(global[a]=c={}),b(c)}),module("Charts",function(a){var b;b=function(){function a(b){var c,d,e,f;d={},f=a.DEFAULTS;for(c in f)e=f[c],d[c]=e;for(c in b)e=b[c],b.hasOwnProperty(c)&&(d[c]=e);return d}return a.DEFAULTS={dot_size:5,dot_color:"#00aadd",dot_stroke_color:"#fff",dot_stroke_size:2,line_width:3,line_color:"#00aadd",smoothing:.4,fill_area:!0,area_color:"#00aadd",area_opacity:.2,show_x_labels:!0,show_y_labels:!0,label_max:!0,label_min:!0,max_x_labels:10,max_y_labels:3,font_family:"Helvetica, Arial, sans-serif",x_label_size:14,y_label_size:14,label_format:"%m/%d",show_grid:!1,x_padding:45,y_padding:40,multi_axis:!1,scale:"linear",y_axis_scale:[],render:"line",bar_width:20},a.merge=function(a,b){var c,d,e;null==a&&(a={}),null==b&&(b={}),d={};for(c in a)e=a[c],d[c]=e;for(c in b)e=b[c],b.hasOwnProperty(c)&&(d[c]=e);return d},a}();var c;c=function(){function a(){}return a.clone=function(b){var c,d;if(null==b||"object"!=typeof b)return b;c=new b.constructor;for(d in b)c[d]=a.clone(b[d]);return c},a.comma=function(a){var b,c,d,e;for(e=a.toString(),b="",c=0,d=e.length-1;d>=0;)b+=e.charAt(c),0===d%3&&0!==d&&(b+=","),c++,d--;return b},a.commas=function(a){var b;return b=a.toString().split("."),1===b.length?this.comma(b[0]):this.comma(b[0])+"."+b[1]},a}();var d,e,f,g,h;f=function(a){switch(a){case 1:return"Jan";case 2:return"Feb";case 3:return"Mar";case 4:return"Apr";case 5:return"May";case 6:return"Jun";case 7:return"Jul";case 8:return"Aug";case 9:return"Sep";case 10:return"Oct";case 11:return"Nov";case 12:return"Dec"}},h=function(a,b){var d,e;return null==b&&(b=2),d=b>0?Math.pow(10,b):1,e=Math.round(a*d)/d,c.commas(e)},g=function(a,b){var c,d,e;return null==b&&(b=2),d=b>0?Math.pow(10,b):1,a>1e6?(c=a/1e6,c=Math.round(c*d)/d,c+"m"):a>1e3?(e=a/1e3,Math.round(e*d)/d+"k"):Math.round(a*d)/d},e=function(){function a(a,b){this.r=a,this.format=null!=b?b:"",this.num=0,this.font_family="Helvetica, Arial, sans-serif",this.color="#333"}return a.prototype.x=function(a){return this.x_func=a,this},a.prototype.y=function(a){return this.y_func=a,this},a.prototype.size=function(a){return this.size=a,this},a.prototype.attr=function(a){return this.options=a,this},a.prototype.draw=function(a){var b;return b=new d(this.r,this.x_func(this.num),this.y_func(this.num),a,this.format,this.size,this.font_family,this.color,this.options),this.num+=1,b.draw()},a}(),d=function(){function a(a,b,c,d,e,f,g,h,i){this.r=a,this.x=b,this.y=c,this.text=d,this.format=null!=e?e:"",this.size=null!=f?f:14,this.font_family=null!=g?g:"Helvetica, Arial, sans-serif",this.color=null!=h?h:"#333",this.options=null!=i?i:void 0}return a.prototype.is_date=function(a){return"[object Date]"===Object.prototype.toString.call(a)},a.prototype.parse_date=function(){var a,b,c,d,e;for(b=this.format.match(/%([a-zA-Z])/g),a=this.format,d=0,e=b.length;e>d;d++)c=b[d],a=a.replace(c,this.parse_format(c));return a},a.prototype.meridian_indicator=function(a){var b;return b=a.getHours(),b>=12?"pm":"am"},a.prototype.to_12_hour_clock=function(a){var b,c;return c=a.getHours(),b=c%12,0===b?12:b},a.prototype.fmt_minutes=function(a){var b;return b=a.getMinutes(),10>b?"0"+b:b},a.prototype.parse_format=function(a){switch(a){case"%m":return this.text.getMonth()+1;case"%b":return f(this.text.getMonth()+1);case"%d":return this.text.getDate();case"%Y":return this.text.getFullYear();case"%H":return this.text.getHours();case"%M":return this.fmt_minutes(this.text);case"%I":return this.to_12_hour_clock(this.text);case"%p":return this.meridian_indicator(this.text)}},a.prototype.draw=function(){var a,b,c,d;return b="",b=this.is_date(this.text)?this.parse_date(this.text):"number"==typeof this.text?h(this.text):this.text,this.element=this.r.text(this.x,this.y,b),c=this.element.getBBox().width,a=5,this.element.attr({fill:this.color,"font-size":this.size,"font-weight":"normal","text-anchor":"middle","font-family":this.font_family}),null!=this.options?this.element.attr(this.options):(d=this.x<c?c/2+a:this.x,this.element.attr({x:d})),this.element},a}();var i;i=function(){function a(a,b,c,d,e){this.r=a,this.width=b,this.height=c,this.points=d,this.options=e}return a.prototype.draw=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n;for(a=Math.round(this.points.length/this.options.step_size),b=this.height-this.options.y_padding,f=this.width-this.options.x_padding,h=Math.round(f/a),j=Math.round(b/a),i=this.options.y_padding,d=this.r.set(),n=this.points,c=k=0,m=n.length;m>k;c=++k)e=n[c],0===c%this.options.step_size&&(g=this.points[c].x,d.push(this.r.path("M "+g+", "+this.options.y_padding+" L "+g+", "+b+" Z")));for(c=l=0;a>=0?a>=l:l>=a;c=a>=0?++l:--l)b>=i&&d.push(this.r.path("M "+this.options.x_padding+", "+i+" L "+f+", "+i+" Z")),i+=j;return d.attr({stroke:"#ccc","stroke-width":1}).toBack()},a}();var j;j=function(){function a(a,b,c,d){this.r=a,this.point=b,this.opts=c,this.scale_factor=null!=d?d:1.5,this.element=this.r.circle(b.x,b.y,this.opts.dot_size),this.style_dot(),this.opts.hover_enabled&&this.attach_handlers()}return a.prototype.style_dot=function(){return this.element.attr({fill:this.opts.dot_color,stroke:this.opts.dot_stroke_color,"stroke-width":this.opts.dot_stroke_size}),this.element.toFront()},a.prototype.activate=function(){return this.element.attr({fill:"#333"}),this.element.animate({r:this.opts.dot_size*this.scale_factor},200)},a.prototype.deactivate=function(){var a;return a=1/this.scale_factor,this.element.attr({fill:this.opts.dot_color}),this.element.animate({r:this.opts.dot_size},200)},a.prototype.attach_handlers=function(){var a=this;return this.element.mouseover(function(){return a.activate()}),this.element.mouseout(function(){return a.deactivate()})},a.prototype.hide=function(){return this.element.hide()},a}();var k;k=function(){function a(b){var c,d,e,f;d={},f=a.DEFAULTS;for(c in f)e=f[c],d[c]=e;for(c in b)e=b[c],b.hasOwnProperty(c)&&(d[c]=e);return d}return a.DEFAULTS={line_width:4,line_color:"#000",area_color:"#00aadd",area_width:20,area_opacity:.2,bar_margin:8,show_average:!0,average_width:4,average_height:8,average_color:"#000",font_family:"Helvetica, Arial, sans-serif",x_label_size:14,y_label_size:14,x_padding:45,y_padding:40},a.merge=function(a,b){var c,d,e;null==a&&(a={}),null==b&&(b={}),d={};for(c in a)e=a[c],d[c]=e;for(c in b)e=b[c],b.hasOwnProperty(c)&&(d[c]=e);return d},a}();var l;l=function(){function a(a,b){var c,d,e;d={};for(c in b)e=b[c],d[c]=e;for(c in a)e=a[c],a.hasOwnProperty(c)&&(d[c]=e);return d}return a.merge=function(a,b){var c,d,e;null==a&&(a={}),null==b&&(b={}),d={};for(c in a)e=a[c],d[c]=e;for(c in b)e=b[c],b.hasOwnProperty(c)&&(d[c]=e);return d},a}();var m,n={}.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};m=function(a){function b(a){return b.__super__.constructor.call(this,a,b.DEFAULTS)}return o(b,a),b.DEFAULTS={bar_margin:30,bar_bg_color:"#bdced3",bar1_color:"90-#2f5e78-#4284a8",bar2_color:"90-#173e53-#225d7c",raw_value_bar_color:"#9eb7bf",x_padding:160,x_padding_right:100,y_padding:50,bg_bar_padding:14,rounding:3,dash_width:3,label_size:14,font_family:"Helvetica, Arial, sans-serif"},b}(l);var p;p=function(){function a(b){var c,d,e,f;d={},f=a.DEFAULTS;for(c in f)e=f[c],d[c]=e;for(c in b)e=b[c],b.hasOwnProperty(c)&&(d[c]=e);return d}return a.DEFAULTS={bar_width:20,bar_spacing:20,bar_color:"#00aadd",rounding:0,font_family:"Helvetica, Arial, sans-serif",show_x_labels:!0,show_y_labels:!0,x_label_size:14,x_label_color:"#333",y_label_size:14,y_label_color:"#333",show_grid:!1,x_padding:25,y_padding:40},a.merge=function(a,b){var c,d,e;null==a&&(a={}),null==b&&(b={}),d={};for(c in a)e=a[c],d[c]=e;for(c in b)e=b[c],b.hasOwnProperty(c)&&(d[c]=e);return d},a}();var q,r,s,t=function(a,b){return function(){return a.apply(b,arguments)}};r=function(){function a(){this.scale=t(this.scale,this)}return a.prototype.domain=function(a){return this.domain_min=Math.min.apply(Math.min,a),this.domain_max=Math.max.apply(Math.max,a),this},a.prototype.range=function(a){return this.range_min=Math.min.apply(Math.min,a),this.range_max=Math.max.apply(Math.max,a),this.scale},a.prototype.scale=function(a){var b,c,d,e;return b=this.domain_max-this.domain_min,c=this.range_max-this.range_min,d=(this.domain_max*this.range_min-this.domain_min*this.range_max)/b,e=d+a*(c/b),0===b?this.range_min:e},a}(),q=function(){function a(a){return this.base=null!=a?a:10,this.scale=t(this.scale,this),this.scale}return a.prototype.scale=function(a){var b;return b=Math.log,b(a)/b(this.base)},a}(),s=function(){function a(){}return a.get_ranges_for_points=function(a){var b,c,d,e,f,g,h,i,j;for(g=[],h=[],i=0,j=a.length;j>i;i++)f=a[i],g.push(f.x),h.push(f.y);return b=Math.max.apply(Math.max,g),c=Math.max.apply(Math.max,h),d=Math.min.apply(Math.min,g),e=Math.min.apply(Math.min,h),[b,d,c,e]},a.threshold=function(a,b){return a>b?b:a},a}(),a.Scaling=s,a.Scaler=r;var u;u=function(){function a(a,b,c){this.y=b,this.options=null!=c?c:{},this.is_date(a)?(this.x=a.getTime(),this.is_date_type=!0):this.x=a}return a.prototype.is_date=function(a){return"[object Date]"===Object.prototype.toString.call(a)},a}(),a.Point=u;var v;Raphael.fn.triangle=function(a,b,c){return c*=1.75,this.path("M".concat(a,",",b,"m0-",.58*c,"l",.5*c,",",.87*c,"-",c,",0z"))},v=function(){function a(a){this.r=a}return a.prototype.black_nub=function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n;return null==b&&(b=10),null==c&&(c=8),null==d&&(d=0),null==e&&(e=0),f=a.getBBox(),m=f.x,n=f.y,i=f.width,g=f.height,h=m+i/2,l=i+2*b,j=g+2*c,k=this.r.set(),k.push(this.r.rect(h-l/2,n-c,l,j,e)),k.push(this.r.triangle(m+i+b+2,n+2+.5*g,4).rotate(90)),k.attr({fill:"#333",stroke:"none"}).toBack()},a.prototype.straight_line=function(a,b){return this.r.path("M"+a.x+","+a.y+"L"+b.x+","+b.y)},a.prototype.vertical_dashed_line=function(a,b,c,d){var e,f,g,h,i,j,k;for(null==c&&(c=3),null==d&&(d=10),f=b.y-a.y,i=Math.floor(f/d),e=this.r.set(),g=j=0,k=i-1;k>=0?k>=j:j>=k;g=k>=0?++j:--j)0===g%2&&(h=this.r.rect(a.x-.5*c,g*d+a.y,c,d),e.push(h));return e},a.prototype.get_points_along_top_of_bbox=function(a,b){var c,d,e,f,g;return null==b&&(b=0),c=a.getBBox(),d=c.x,e=c.x+c.width,f=c.y+b,g=f,[new u(d,f),new u(e,g)]},a.prototype.one_px_highlight=function(a){var b,c,d;return d=this.get_points_along_top_of_bbox(a,2),c=d[0],b=d[1],this.straight_line(c,b).attr({"stroke-width":1,stroke:"rgba(255,255,255,0.3)"}),this.straight_line},a.prototype.one_px_shadow=function(a){var b,c,d;return d=this.get_points_along_top_of_bbox(a),c=d[0],b=d[1],this.straight_line(c,b).attr({"stroke-width":.5,stroke:"rgba(0,0,0,0.5)"}),this.straight_line},a}(),a.Effects=v;var w;w=function(){function a(a,b,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r=this;this.r=a,null==e&&(e=!0),n=30,j=25,k=10,m=5,"number"==typeof d&&(d=c.commas(Math.round(100*d)/100)),f=b.getBBox(),p=f.x,q=f.y,i=f.width,g=f.height,h=p+i/2,this.text=this.r.text(h,q-(j/2+k),d),this.text.attr({fill:"#fff","font-size":14,"text-anchor":"middle",opacity:0,"font-weight":"bold"}),l=10,o=this.text.getBBox().width+2*l,this.popup=this.r.set(),this.popup.push(this.r.rect(h-o/2,q-(j+k),o,j,m)),this.triangle=this.r.triangle(h,q-k+4,4).rotate(180),this.popup.push(this.triangle),this.popup.attr({fill:"rgba(0,0,0,.4)",opacity:0,stroke:"none"}),this.popup.toFront(),this.text.toFront(),e===!0&&(b.mouseover(function(){return r.show()}),b.mouseout(function(){return r.hide()}))}return a.prototype.animate_opacity=function(a,b,c){var d=this;return null==c&&(c=200),a.animate({opacity:b,"fill-opacity":b},c,function(){return 0===b?(d.text.toBack(),d.popup.toBack()):void 0})},a.prototype.hide=function(){return this.animate_opacity(this.popup,0),this.animate_opacity(this.text,0)},a.prototype.show=function(){return this.popup.toFront(),this.text.toFront(),this.animate_opacity(this.popup,.9),this.animate_opacity(this.text,1)},a.prototype.translate=function(a,b){return this.popup.translate(a,b),this.text.translate(a,b),this.triangle.translate(-2*a,b)},a}(),a.Tooltip=w;var x;x=function(){function a(a,b,c,d,e,f){this.r=a,this.raw_points=b,this.scaled_points=c,this.height=d,this.width=e,this.options=null!=f?f:{},this.effective_height=this.height-this.options.y_padding,this.x_offset=this.options.bar_width/2}return a.prototype.draw=function(){return this.draw_bars()},a.prototype.draw_bars=function(){var a,b,c,d,e,f,g,h,i,j,k;for(f=this.r.set(),g=[],b=0,c=0,k=this.scaled_points,a=i=0,j=k.length;j>i;a=++i)d=k[a],h=d.x-this.x_offset,e=this.r.rect(h,d.y,this.options.bar_width,this.effective_height-d.y),f.push(e),g.push(new w(this.r,e,this.raw_points[a].y)),this.raw_points[a].y>=this.raw_points[b].y&&(b=a),this.raw_points[a].y<this.raw_points[c].y&&(c=a);return f.attr({fill:this.options.line_color,stroke:"none"}),this.options.label_max&&g[b].show(),this.options.label_min?g[c].show():void 0},a}();var y;y=function(){function a(){}return a.create_path=function(b,c){var d,e,f,g,h,i,j,k;for(null==c&&(c=.5),g="M"+b[0].x+", "+b[0].y,f=i=0,j=b.length;j>i;f=++i)h=b[f],0!==f&&(k=a.get_control_points(b,f-1,c),d=k[0],e=k[1],g+="C"+d.x+","+d.y+" "+e.x+","+e.y+" "+b[f].x+","+b[f].y);return g},a.get_control_points=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,v,w;return null==d&&(d=3),s=this.get_prev_and_next_points(a,b),k=s[0],m=s[1],t=this.get_prev_and_next_points(a,b+1),l=t[0],n=t[1],v=this.get_tangent(k,m),o=v[0],p=v[1],w=this.get_tangent(l,n),q=w[0],r=w[1],f=l.x+o*c/d,g=l.y+p*c/d,i=m.x-q*c/d,j=m.y-r*c/d,e=new u(f,g),h=new u(i,j),[e,h]},a.get_prev_and_next_points=function(a,b){var c,d;return d=b-1,c=b+1,0>d&&(d=0),c>=a.length&&(c=a.length-1),[a[d],a[c]]},a.get_tangent=function(a,b){var c,d;return c=b.x-a.x,d=b.y-a.y,[c,d]},a}(),a.Bezier=y;var z;z=function(){function a(a,b,c,d,e,f){this.r=a,this.raw_points=b,this.scaled_points=c,this.height=d,this.width=e,this.options=null!=f?f:{}}return a.prototype.draw=function(){var a;a=y.create_path(this.scaled_points,this.options.smoothing),this.options.fill_area&&this.draw_area(a),this.draw_curve(a),this.options.dot_size>0&&this.draw_dots_and_tooltips(this.scaled_points,this.raw_points)},a.prototype.draw_curve=function(a){var b;return b=this.r.path(a),b.attr({stroke:this.options.line_color,"stroke-width":this.options.line_width}).toFront()},a.prototype.draw_area=function(a){var b,c,d,e,f;return f=this.scaled_points,e=this.height-this.options.y_padding,c=f[f.length-1],d=f[0],a+="L "+c.x+", "+e+" ",a+="L "+d.x+", "+e+" ",a+="Z",b=this.r.path(a),b.attr({fill:this.options.area_color,"fill-opacity":this.options.area_opacity,stroke:"none"}),b.toBack()},a.prototype.draw_dots_and_tooltips=function(){var a,b,d,e,f,g,h,i,k,l,m,n,o,p;for(l=this.scaled_points,k=this.raw_points,n=[],b=[],e=0,f=0,d=o=0,p=l.length;p>o;d=++o)h=l[d],i=k[d],i.y>=k[e].y&&(e=d),i.y<k[f].y&&(f=d),g=c.clone(this.options),g.hover_enabled=!i.options.show_dot,a=new j(this.r,h,g),m=new w(this.r,a.element,i.options.tooltip||i.y,g.hover_enabled),b.push(a),n.push(m),i.options.no_dot===!0&&a.hide(),i.options.show_dot===!0&&(a.activate(),m.show());return this.options.label_max&&(n[e].show(),b[e].activate()),this.options.label_min?(n[f].show(),b[f].activate()):void 0},a}();var A,B;B=function(a){return void 0!==a.tagName?!0:!1},A=function(){function a(a,b){var c,d;c=B(a)?a:document.getElementById(a),d=this.get_dimensions(c),this.width=d[0],this.height=d[1],this.r=Raphael(c,this.width,this.height),this.options=b}return a.prototype.get_dimensions=function(a){var b,c;return c=parseInt(a.style.width),b=parseInt(a.style.height),[c,b]},a.prototype.clear=function(){return this.r.clear()},a}();var C,D,E,F,G,n={}.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};D=function(a){function b(a){return b.__super__.constructor.call(this,a,b.DEFAULTS)}return o(b,a),b.DEFAULTS={main_circle_radius:70,child_radius_multiplier:.15,hover_scale_multiplier:1.2,inactive_opacity:.4,outer_radius_multiplier:1.35,outer_radius2_multiplier:1.5,bounce_radius:1.2,fill_color:"#00a6dd"},b}(l),G=function(a,b,c){var d,e;return d=b*Math.cos(c)+a.x,e=b*Math.sin(c)+a.y,new u(d,e)},E=function(a,b,c,d,e){var f;return f=function(a,b,c,d){return null==d&&(d=void 0),a.animate({x:b.x,y:b.y,cx:b.x,cy:b.y},c,"<",d)},f(a,b,d,function(){return f(a,c,e)})},F=function(a,b,c,d){var e,f;return e={fill:this.options.fill_color,stroke:"none"},f=this.r.set(),f.push(this.r.circle(a,b,c).attr(e)),f.push(this.r.text(a,b,"+").attr({"font-size":d,fill:"#fff"})),f.attr({cursor:"pointer"}).toFront()},C=function(a){function b(a,c){null==c&&(c={}),b.__super__.constructor.call(this,a,new D(c)),this.center_point=new u(this.width/2,this.height/2),this.main_radius=this.options.main_circle_radius,this.child_radius=this.main_radius*this.options.child_radius_multiplier,this.outer_radius=this.main_radius*this.options.outer_radius_multiplier,this.outer_radius2=this.outer_radius*this.options.outer_radius2_multiplier,this.bounce_radius=this.outer_radius*this.options.bounce_radius,this.children=[]}return o(b,a),b.prototype.add_hover=function(a){var b,c,d=this;return b=function(){return a[0].animate({r:d.options.hover_scale_multiplier*d.child_radius,opacity:1,"stroke-width":2,stroke:"rgba(0,0,0,.4)"},200),a[1].animate({"font-size":22,opacity:1,fill:"#fff"},200),a._label.animate({opacity:1},200)},c=function(){return a[0].animate({r:d.child_radius,opacity:d.options.inactive_opacity,stroke:"none","stroke-width":0},200),a[1].animate({opacity:0},200),a._label.animate({opacity:0},200)},a._activate=b,a._deactivate=c,a.hover(b,c)},b.prototype.add=function(a){return this.children.push(a)},b.prototype.create_circles_along_radius=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o;for(i=2*Math.PI/24,o=[],f=l=0,m=a.length;m>l;f=++l)g=a[f],h=f*i,n=G(this.center_point,c,h),j=n.x,k=n.y,e=this.draw_circle(this.center_point.x,this.center_point.y,b,16),e._realx=j,e._realy=k,e._radians=h,e.attr({opacity:this.options.inactive_opacity}).toFront(),e[1].attr({opacity:0}),this.add_label_to_circle(g,e),this.add_hover(e),o.push(d(g,e));return o},b.prototype.bounce_circles=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;if(b){for(c=100,i=10,k=100,r=[],g=o=0,p=b.length;p>o;g=++o)f=b[g],j=f._radians,q=G(this.center_point,this.bounce_radius,j),m=q.x,n=q.y,e=new u(m,n),h=void 0,l=void 0,a._active?(h=b.length-g,l=this.center_point,f.toBack()):(h=g,l=new u(f._realx,f._realy),f.toFront()),d=c+h*i,r.push(E(f,e,l,d,k));return r}},b.prototype.add_click_to_circle=function(a,b){var c,d=this;return null==b&&(b=!1),c=function(){var b,c,e,f,g;if(a._active){if(a.hover(a._activate,a._deactivate),c=0,a._children)for(g=a._children,e=0,f=g.length;f>e;e++)b=g[e],b._active&&(b._deactivate(),b._click_handler())}else a.unhover(a._activate,a._deactivate),c=45;return d.bounce_circles(a,a._children),a.animate({transform:"r"+c},200),a._active=!a._active},a._click_handler=c,a.click(c)},b.prototype.add_label_to_circle=function(a,b){var c,d,e,f,h;return d=this.r.text(b._realx,b._realy,a.label).attr({"font-size":14}),e=this.r.text(b._realx,b._realy+15,g(a.value)).attr({"font-size":12,fill:this.options.fill_color}).toBack(),f=this.r.set(),f.push(d),f.push(e),b._realx>this.center_point.x?(c="start",h=30):(c="end",h=-30),f.attr({"text-anchor":c,x:b._realx+h,opacity:0}),b._label=f},b.prototype.add_grandchildren=function(a,b){return a.children?(b._children=[],this.create_circles_along_radius(a.children,this.child_radius,this.outer_radius2,function(a,c){return b._active=!1,b._children.push(c)})):void 0},b.prototype.draw_circle=function(a,b,c,d){var e,f;return e={fill:this.options.fill_color,stroke:"none"},f=this.r.set(),f.push(this.r.circle(a,b,c).attr(e)),f.push(this.r.text(a,b,"+").attr({"font-size":d,fill:"#fff"})),f.attr({cursor:"pointer"}).toFront()},b.prototype.draw=function(){var a,b,c,d=this;return b=this.draw_circle(this.center_point.x,this.center_point.y,this.main_radius,100),b._active=!1,b._children=[],this.add_click_to_circle(b,!0),a=this.children.length,c=2*Math.PI/a,this.create_circles_along_radius(this.children,this.child_radius,this.outer_radius,function(a,c){return d.add_grandchildren(a,c),d.add_click_to_circle(c),b._children.push(c)}),b.toFront()},b}(A),a.PathMenu=C;var H,I,J,n={}.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};J=function(a,b,c,d,e){var f,g,h,i,j;return g=360/d*c,f=(90-g)*Math.PI/180,i=a+e*Math.cos(f),j=b-e*Math.sin(f),h=void 0,h=d===c?[["M",a,b-e],["A",e,e,0,1,1,a-.01,b-e]]:[["M",a,b-e],["A",e,e,0,+(g>180),1,i,j]],{path:h}},I=function(a){function b(a){return b.__super__.constructor.call(this,a,b.DEFAULTS)}return o(b,a),b.DEFAULTS={radius:55,stroke_width:30,font_color:"#333333",label_color:"#333333",fill_color:"#fff",stroke_color:"#81ae14",background_color:"#222222",text_shadow:!1},b}(l),H=function(a){function b(a,c,d,e){this.label=c,this.value=d,null==e&&(e={}),b.__super__.constructor.call(this,a,new I(e)),this.center_point=new u(this.width/2,this.height/2),this.r.customAttributes.arc=J}return o(b,a),b.prototype.draw=function(){var a,b,c;return b=this.r.path().attr({"stroke-width":this.options.stroke_width,stroke:this.options.stroke_color,arc:[this.center_point.x,this.center_point.y,0,100,this.options.radius]}),this.r.circle(this.center_point.x,this.center_point.y,this.options.radius).attr({fill:this.options.fill_color,stroke:"none","stroke-width":0}),c=Math.round(100*this.value/100)+"%",this.r.text(this.center_point.x,this.center_point.y,c).attr({"font-size":this.options.radius/2.5,fill:this.options.font_color,"font-weight":"bold"}),a=this.r.text(this.center_point.x,this.center_point.y+1.8*this.options.radius,this.label).attr({"font-size":this.options.radius/2.5,"font-weight":"bold",fill:this.options.label_color}),this.options.text_shadow&&this.r.text(this.center_point.x,this.center_point.y+1.8*this.options.radius+1,this.label).attr({"font-size":this.options.radius/2.5,"font-weight":"bold",fill:this.options.text_shadow}).toBack(),b.animate({arc:[this.center_point.x,this.center_point.y,this.value,100,this.options.radius]},1500,"<")},b}(A),a.CircleProgress=H;var K,n={}.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};K=function(a){function c(a,d){null==d&&(d={}),c.__super__.constructor.call(this,a,new b(d)),this.padding=26,this.all_points=[],this.line_indices=[],this.line_options=[]}return o(c,a),c.prototype.add_line=function(a){var c,d,e,f,g,h;if(c=a.data,!(c.length<1)){for(e=[],g=0,h=c.length;h>g;g++)d=c[g],3===d.length?e.push(new u(d[0],d[1],d[2])):e.push(new u(d[0],d[1]));f=this.all_points.length,this.line_indices.push([f,f+e.length-1]),this.all_points.push.apply(this.all_points,e),this.line_options.push(b.merge(this.options,a.options))}},c.prototype.draw_grid=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(null==a&&(a=[]),null==b&&(b=[]),i=function(a,b,c){return a.attr({stroke:b,"stroke-width":c})},l=this.options.multi_axis?2*this.options.x_padding:this.options.x_padding,c=this.height-this.options.y_padding,k=this.width-l,f=this.r.set(),m=0,o=a.length;o>m;m++)j=a[m],f.push(this.r.path("M "+j+", "+this.options.y_padding+" L "+j+", "+c+" Z"));for(n=0,p=b.length;p>n;n++)j=b[n],f.push(this.r.path("M "+this.options.x_padding+", "+j+" L "+k+", "+j+" Z"));return this.options.multi_axis===!0&&2===this.line_options.length&&(d=this.options.x_padding,e=this.r.path("M "+d+", "+this.options.y_padding+" L "+d+", "+c+" Z"),g=this.width-2*this.options.x_padding,h=this.r.path("M "+g+", "+this.options.y_padding+" L "+g+", "+c+" Z"),i(e,this.line_options[0].line_color,2).toBack(),i(h,this.line_options[1].line_color,2).toBack()),i(f,"#ddd",1).toBack()},c.prototype.create_scalers=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,t=this;return l=void 0,e=void 0,g=void 0,f=void 0,h=void 0,"log"===this.options.scale?(c=new q,d=function(){var b,d,e;for(e=[],b=0,d=a.length;d>b;b++)i=a[b],e.push(new u(i.x,c(i.y)));return e}(),n=s.get_ranges_for_points(d),e=n[0],g=n[1],f=n[2],h=n[3]):(o=s.get_ranges_for_points(a),e=o[0],g=o[1],f=o[2],h=o[3]),2===this.options.y_axis_scale.length&&(p=this.options.y_axis_scale,h=p[0],f=p[1]),k=this.options.multi_axis?2*this.options.x_padding:this.options.x_padding,j=(new r).domain([g,e]).range([this.options.x_padding,this.width-k]),m=(new r).domain([h,f]).range([this.options.y_padding,this.height-this.options.y_padding]),b=function(a){return t.height-m(a)},l="log"===this.options.scale?function(a){return b(c(a))}:b,[j,l]},c.prototype.create_scalers_for_single_point=function(){var a,b,c=this;return b=function(){return.5*(c.height-c.options.y_padding)},a=function(){return.5*(c.width-c.options.x_padding)},[a,b]},c.prototype._draw_y_labels=function(a,b){var c,d,f,g,h,i,j,k,l,m,n,o,p,q;for(null==b&&(b=0),d=this.options.label_format,k=this.options.y_label_size,f=this.options.font_family,j=k+5,i=this.options.multi_axis&&b>0?b:b+j,1===a.length?(p=this.create_scalers_for_single_point(),l=p[0],m=p[1]):(q=this.create_scalers(a),l=q[0],m=q[1]),h=[],c=new e(this.r,d).x(function(){return i}).y(function(b){return m(a[b].y)}).size(k),n=0,o=a.length;o>n;n++)g=a[n],c.draw(g.y),h.push(m(g.y));return h},c.prototype.calc_y_label_step_size=function(a,b,c){var d;return null==c&&(c=this.options.max_y_labels),d=(b-a)/(c-1),b>1&&(d=Math.round(d),0===d&&(d=1)),d},c.prototype.draw_y_labels=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(null==b&&(b=0),o=s.get_ranges_for_points(a),g=o[0],i=o[1],h=o[2],j=o[3],2===this.options.y_axis_scale.length&&(p=this.options.y_axis_scale,j=p[0],h=p[1]),h===j)return this._draw_y_labels([new u(0,h)],b);if(e=[],"log"===this.options.scale)for(f=new q,l=f(j),c=f(h),m=(c-l)/(this.options.max_y_labels-1),d=j,k=0;h>=d&&k<this.options.max_y_labels;)d=Math.pow(10,l+m*k),e.push(new u(0,d)),k+=1;else for(n=j,m=this.calc_y_label_step_size(j,h);h>=n;)e.push(new u(0,n)),n+=m;return h>1&&(e[e.length-1].y=Math.round(h)),this._draw_y_labels(e,b)},c.prototype.draw_x_label=function(a,b){var c,e,f,g;return c=this.options.label_format,g=this.options.x_label_size,e=this.options.font_family,f=a.is_date_type===!0?new Date(a.x):Math.round(a.x),new d(this.r,b.x,this.height-g,f,c,g,e).draw()},c.prototype.draw_x_labels=function(a,b){var c,d,e,f,g,h,i,j,k;if(d=[],g=this.options.max_x_labels,this.draw_x_label(a[0],b[0]),d.push(b[0].x),!(2>g||(e=b.length-1,this.draw_x_label(a[e],b[e]),d.push(b[e].x),3>g))){for(f=b.length-2,k=f/(g-1),j=Math.round(k),k!==j&&(k=j+1),c=k;f>c;)i=a[c],h=b[c],this.draw_x_label(i,h),d.push(h.x),c+=k;return d}},c.prototype.draw_line=function(a,b,c){return"bar"===this.options.render?new x(this.r,a,b,this.height,this.width,c).draw():new z(this.r,a,b,this.height,this.width,c).draw()},c.prototype.clear=function(){return c.__super__.clear.call(this),this.all_points=[],this.line_indices=[],this.line_options=[]},c.prototype.draw=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;if(!(this.all_points.length<1))for(this.r.clear(),o=this.all_points.length>1?this.create_scalers(this.all_points):this.create_scalers_for_single_point(),k=o[0],l=o[1],p=this.line_indices,c=m=0,n=p.length;n>m;c=++m)d=p[c],a=d[0],b=d[1],j=this.all_points.slice(a,b+1||9e9),this.options.multi_axis?(q=this.all_points.length>2?this.create_scalers(j):this.create_scalers_for_single_point(),e=q[0],f=q[1]):(e=k,f=l),i=function(){var a,b,c;for(c=[],a=0,b=j.length;b>a;a++)h=j[a],c.push(new u(e(h.x),f(h.y)));return c}(),g=this.line_options[c],this.draw_line(j,i,g),0===c?(this.options.show_x_labels===!0&&(this.x_label_coordinates=this.draw_x_labels(j,i)),this.options.multi_axis&&this.options.show_y_labels===!0?this.y_label_coordinates=this.draw_y_labels(j):this.options.show_y_labels===!0&&(this.y_label_coordinates=this.draw_y_labels(this.all_points)),this.options.show_grid===!0&&this.draw_grid(this.x_label_coordinates,this.y_label_coordinates)):1===c&&this.options.multi_axis&&this.options.show_y_labels===!0&&this.draw_y_labels(j,this.width-this.options.x_padding)},c}(A),a.LineChart=K;var L,M,N,n={}.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};M=function(a,b,c){return{label:a,raw_value:b,index_value:c}},N=function(a,b,c){return{label:a,index_value:b,opacity:c}},L=function(a){function b(a,c){null==c&&(c={}),b.__super__.constructor.call(this,a,new m(c)),this.effects=new v(this.r),this.bars=[],this.guides=[],this.index=100}return o(b,a),b.prototype.add=function(a,b,c){return this.bars.push(M(a,b,c))},b.prototype.add_guide_line=function(a,b,c){return null==c&&(c=1),this.guides.push(N(a,b,c))},b.prototype.add_raw_label=function(a){var b,c=this;return b=new e(this.r).x(function(){return c.width-10
}).y(function(a){return 15*a+15}).size(this.options.label_size).attr({fill:"#333","text-anchor":"end","font-weight":"bold"}),b.draw(a),b.draw("(raw value)").attr({"font-weight":"normal","font-size":10})},b.prototype.set_bar_height=function(){var a,b,c;return c=this.bars.length,b=this.options.bar_margin,a=this.height-this.options.y_padding,this.bar_height=a/c-b},b.prototype.set_threshold=function(){var a,b;return b=function(){var b,c,d,e;for(d=this.guides,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.index_value);return e}.call(this),this.threshold=Math.max.apply(Math.max,b)},b.prototype.format_tooltip=function(a){return a/100+"x"},b.prototype.draw_raw_bar=function(a,b){var c,d,e,f,g;return e=14,d=Math.floor(e/2),c=10,g=this.options.x_padding_right-c,f=this.r.rect(this.width-g,b-d,this.width-this.options.x_padding_right,this.bar_height+e,this.options.rounding),f.attr({fill:this.options.raw_value_bar_color,stroke:"none"}),this.effects.straight_line(new u(this.width-g,this.options.y_padding-10),new u(this.width-g,this.height)).attr({stroke:"rgba(0,0,0,0.25)","stroke-width":.1})},b.prototype.draw_bg_bar=function(a,b,c){var d,e,f,g;return g=b(a),e=this.options.bg_bar_padding,d=Math.floor(e/2),f=this.r.rect(this.options.x_padding-d,c-d,this.width,this.bar_height+e,this.options.rounding),f.attr({fill:this.options.bar_bg_color,stroke:"none"}).toBack()},b.prototype.shade_bar=function(a,b){return null==b&&(b=this.options.bar1_color),a.attr({fill:b,stroke:"none"}),this.effects.one_px_shadow(a),this.effects.one_px_highlight(a)},b.prototype.render_bar=function(a,b,c,d){var e;return null==d&&(d=this.options.bar1_color),e=this.r.rect(a,b,c,this.bar_height,this.options.rounding),this.shade_bar(e,d),e},b.prototype.draw_bar=function(a,b,c){var d,e,f,g,h,i;return i=b(s.threshold(a,this.threshold)),a>this.index?(d=b(this.index),f=this.render_bar(this.options.x_padding,c,d-this.options.x_padding),g=this.render_bar(d,c,i-d,this.options.bar2_color),h=new w(this.r,g,this.format_tooltip(a)),h.translate(g.getBBox().width/2,0),f.mouseover(function(){return h.show()}),f.mouseout(function(){return h.hide()})):(e=this.render_bar(this.options.x_padding,c,i-this.options.x_padding),h=new w(this.r,e,this.format_tooltip(a)),h.translate(e.getBBox().width/2,0))},b.prototype.draw_guide_line=function(a,b,c,d){var f,g,h;return null==d&&(d=1),h=new u(c,this.options.y_padding),f=new u(c,this.height),this.effects.vertical_dashed_line(h,f,this.options.dash_width).attr({fill:"rgba(0,0,0,"+d+")",stroke:"none"}),g=new e(this.r).x(function(){return c}).y(function(a){return 15*a+15}).size(this.options.label_size).attr({fill:"rgba(0,0,0,"+d+")"}),g.draw(a).attr({"font-weight":"bold"}),g.draw(b).attr({"font-size":10})},b.prototype.sort_bars_by_index=function(){var a,b;return b=function(){var b,c,d,e;for(d=this.bars,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a);return e}.call(this),b.sort(function(a,b){return b.index_value-a.index_value}),b},b.prototype.clear=function(){return b.__super__.clear.call(this),this.bars=[],this.guides=[]},b.prototype.draw=function(){var a,b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,s,t,u,v,w=this;for(this.set_bar_height(),this.set_threshold(),j=this.bar_height+this.options.bar_margin,c=this.bar_height/2,n=this.options.y_padding,l=this.options.x_padding,g=new e(this.r).y(function(a){return a*j+n+c}).x(function(){return l-30}).size(12).attr({fill:"#fff","text-anchor":"end"}),i=new e(this.r).y(function(a){return a*j+n+c}).x(function(){return w.width-10}).size(this.options.label_size).attr({fill:"#333","text-anchor":"end"}),k=(new r).domain([0,this.threshold]).range([this.options.x_padding,this.width-this.options.x_padding_right]),m=function(a){return a*(w.bar_height+w.options.bar_margin)+w.options.y_padding},t=this.sort_bars_by_index(),d=o=0,q=t.length;q>o;d=++o)a=t[d],this.draw_bg_bar(a.index_value,k,m(d)),this.draw_raw_bar(a.raw_value,m(d)),this.draw_bar(a.index_value,k,m(d)),h=i.draw(a.raw_value),f=g.draw(a.label),this.effects.black_nub(f);for(u=this.guides,v=[],p=0,s=u.length;s>p;p++)b=u[p],v.push(this.draw_guide_line(b.label,b.index_value,k(b.index_value),b.opacity));return v},b}(A),a.IndexChart=function(a,b){return new L(a,b)};var O,P,n={}.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};P=function(a,b,c,d){return{label:a,value:b,average:c,comparison:d}},O=function(a){function b(a,c){null==c&&(c={}),b.__super__.constructor.call(this,a,new k(c)),this.bars=[]}return o(b,a),b.prototype.add=function(){return this.bars.push(P.apply(P,arguments))},b.prototype.draw_background=function(a,b){var c;return c=this.r.rect(this.options.x_padding,b,a.x,this.options.area_width),c.attr({fill:this.options.area_color,stroke:"none"})},b.prototype.draw_line=function(a,b){var c,d;return d=b.y-this.options.line_width/2,c=this.r.rect(this.options.x_padding,d,a.x,this.options.line_width),c.attr({fill:this.options.line_color,stroke:"none"})},b.prototype.draw_average=function(a,b){var c;return c=this.r.rect(a.x-this.options.average_width/2,b-this.options.average_height/2,this.options.average_width,this.options.average_height),c.attr({fill:this.options.average_color,stroke:"none"})},b.prototype.draw_label=function(){},b.prototype.clear=function(){return b.__super__.clear.call(this),this.bars=[]},b.prototype.draw=function(){var a,b,c,e,f,g,h,i,j,k,l,m,n,o,p,q;for(o=this.bars,q=[],a=m=0,n=o.length;n>m;a=++m)P=o[a],h=[new u(P.comparison,0),new u(P.value,0),new u(P.average,0),new u(0,0)],p=s.get_ranges_for_points(h),b=p[0],f=p[1],c=p[2],g=p[3],k=(new r).domain([f,b]).range([this.options.x_padding,this.width-this.options.x_padding]),j=function(){var a,b,c;for(c=[],a=0,b=h.length;b>a;a++)i=h[a],c.push(new u(k(i.x),0));return c}(),l=a*(this.options.area_width+this.options.bar_margin),this.draw_background(j[0],l),e=l+this.options.area_width/2,this.draw_line(j[1],new u(j[0].x,e)),this.draw_average(j[2],e),q.push(new d(this.r,0,l+this.options.area_width/2,P.label,"",this.size=14,this.options.font_family).draw());return q},b}(A),a.BulletChart=O;var Q,n={}.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};Q=function(a){function b(a,c){null==c&&(c={}),b.__super__.constructor.call(this,a,new p(c)),this.effective_height=this.height-this.options.y_padding,this.bar_options=[],this.bars=[],this.values=[]}return o(b,a),b.prototype.add=function(a){var b,c;return b=a.label,c=a.value,this.bar_options.push(p.merge(this.options,a.options)),this.values.push(c),this.bars.push({label:b,value:c})},b.prototype.render_bar=function(a,b,c,e){var f;return f=this.r.rect(c.x,c.y,this.options.bar_width,this.effective_height-c.y,this.options.rounding),f.attr({fill:e.bar_color,stroke:"none"}),new d(this.r,c.x+this.options.bar_width/2,this.height-(this.options.x_label_size+5),a,"",this.options.x_label_size,this.options.font_family,this.options.x_label_color).draw(),new d(this.r,c.x+this.options.bar_width/2,c.y-this.options.y_label_size-5,b,"",this.options.y_label_size,this.options.font_family,this.options.y_label_color).draw()},b.prototype.clear=function(){return b.__super__.clear.call(this),this.bars=[],this.values=[]},b.prototype.draw=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,t,v=this;for(g=function(){var a,c,d,e;for(d=this.values,e=[],b=a=0,c=d.length;c>a;b=++a)k=d[b],e.push(new u(b,k));return e}.call(this),g.push(new u(0,0)),p=s.get_ranges_for_points(g),c=p[0],e=p[1],d=p[2],f=p[3],m=(new r).domain([f,d]).range([this.options.y_padding,this.height-this.options.y_padding]),l=function(a){return v.height-m(a)},q=this.bars,t=[],b=n=0,o=q.length;o>n;b=++n)a=q[b],h=b*(this.options.bar_width+this.options.bar_spacing)+this.options.x_padding,i=l(g[b].y),j=new u(h,i),t.push(this.render_bar(a.label,a.value,j,this.bar_options[b]));return t},b}(A),a.BarChart=Q});